class t{constructor(){}setupSvg(){let t=document.createElementNS("http://www.w3.org/2000/svg","svg");t.id="lines",t.style="position: absolute; height:100%; width:100%";let r=document.createElementNS("http://www.w3.org/2000/svg","path");return r.id="new_path",r.setAttribute("fill","none"),r.setAttribute("stroke","#ddd"),r.setAttribute("stroke-width","6"),r.setAttribute("stroke-dasharray","10,6"),t.appendChild(r),this.svg=t,t}addNode(t){this.canva.appendChild(t)}draw(t){let r=document.createElement("div");r.className="canva",r.id="canva",r.appendChild(this.setupSvg()),document.getElementById("tree").appendChild(r),this.canva=r}}const r=(t=10)=>{let r="";const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz";let n=0;for(;n<t;)r+=e.charAt(Math.floor(52*Math.random())),n+=1;return r},e=(t,r,e)=>{const n=t.getBoundingClientRect(),i=r.getBoundingClientRect();return((t,r,e,n)=>{let i=e-t,o=n-r;return Math.sqrt(i*i+o*o)})(n.left+n.width/2,n.top+n.height/2,i.left+i.width/2,i.top+i.height/2)<=e},n=t=>t===document.querySelector(".dragging");function i(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var o={exports:{}},s=function(){var t=this,r=-1;return{next:function(){return r+=1,{value:t.items[r],done:r>=t.items.length}}}},u=function(){return this.items};function c(t){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},c(t)}var a={isArray:function(t){return Array.isArray(t)},isObject:function(t){return"object"===c(t)&&!1===Array.isArray(t)&&null!==t},isFunction:function(t){return"function"==typeof t}},f=a.isFunction,l=function(t){return void 0===t?this.sum()/this.items.length:f(t)?new this.constructor(this.items).sum(t)/this.items.length:new this.constructor(this.items).pluck(t).sum()/this.items.length},h=l;function y(t){return y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},y(t)}var p=function(t){var r=this,e=[],n=0;if(Array.isArray(this.items))do{var i=this.items.slice(n,n+t),o=new this.constructor(i);e.push(o),n+=t}while(n<this.items.length);else if("object"===y(this.items)){var s=Object.keys(this.items),u=function(){var i=s.slice(n,n+t),o=new r.constructor({});i.forEach((function(t){return o.put(t,r.items[t])})),e.push(o),n+=t};do{u()}while(n<s.length)}else e.push(new this.constructor([this.items]));return new this.constructor(e)};function m(t){return function(t){if(Array.isArray(t))return v(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(!t)return;if("string"==typeof t)return v(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return v(t,r)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var b=function(){var t;return new this.constructor((t=[]).concat.apply(t,m(this.items)))};function d(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==e)return;var n,i,o=[],s=!0,u=!1;try{for(e=e.call(t);!(s=(n=e.next()).done)&&(o.push(n.value),!r||o.length!==r);s=!0);}catch(t){u=!0,i=t}finally{try{s||null==e.return||e.return()}finally{if(u)throw i}}return o}(t,r)||function(t,r){if(!t)return;if("string"==typeof t)return w(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return w(t,r)}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}function g(t){return g="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},g(t)}var A=function(t){var r=this,e=t;e instanceof this.constructor&&(e=t.all());var n={};if(Array.isArray(this.items)&&Array.isArray(e))this.items.forEach((function(t,r){n[t]=e[r]}));else if("object"===g(this.items)&&"object"===g(e))Object.keys(this.items).forEach((function(t,i){n[r.items[t]]=e[Object.keys(e)[i]]}));else if(Array.isArray(this.items))n[this.items[0]]=e;else if("string"==typeof this.items&&Array.isArray(e)){var i=d(e,1);n[this.items]=i[0]}else"string"==typeof this.items&&(n[this.items]=e);return new this.constructor(n)};function O(t){return function(t){if(Array.isArray(t))return j(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(!t)return;if("string"==typeof t)return j(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return j(t,r)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function j(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var S=function(t){var r,e;Array.isArray(t)?(e=r=[]).push.apply(e,O(t)):(r={},Object.keys(t).forEach((function(e){r[e]=t[e]})));return r};function E(t){return E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},E(t)}var k=S,I=function(t){var r=t;t instanceof this.constructor?r=t.all():"object"===E(t)&&(r=[],Object.keys(t).forEach((function(e){r.push(t[e])})));var e=k(this.items);return r.forEach((function(t){"object"===E(t)?Object.keys(t).forEach((function(r){return e.push(t[r])})):e.push(t)})),new this.constructor(e)};function x(t){return function(t){if(Array.isArray(t))return P(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(!t)return;if("string"==typeof t)return P(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return P(t,r)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var M=function(t){var r=[];return Array.isArray(t)?r.push.apply(r,x(t)):"Collection"===t.constructor.name?r.push.apply(r,x(t.all())):Object.keys(t).forEach((function(e){return r.push(t[e])})),r};function N(t){return function(t){if(Array.isArray(t))return $(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(!t)return;if("string"==typeof t)return $(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return $(t,r)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function $(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var C=M,F=a.isFunction,B=function(t,r){if(void 0!==r)return Array.isArray(this.items)?this.items.filter((function(e){return void 0!==e[t]&&e[t]===r})).length>0:void 0!==this.items[t]&&this.items[t]===r;if(F(t))return this.items.filter((function(r,e){return t(r,e)})).length>0;if(Array.isArray(this.items))return-1!==this.items.indexOf(t);var e=C(this.items);return e.push.apply(e,N(Object.keys(this.items))),-1!==e.indexOf(t)},D=function(){return 1===this.count()},T=function(){var t=0;return Array.isArray(this.items)&&(t=this.items.length),Math.max(Object.keys(this.items).length,t)},U=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(t){return t};return new this.constructor(this.items).groupBy(t).map((function(t){return t.count()}))},J=function(){for(var t=arguments.length,r=new Array(t),e=0;e<t;e++)r[e]=arguments[e];return new this.constructor(function t(r,e,n){var i=n[0];i instanceof e&&(i=i.all());for(var o=n.slice(1),s=!o.length,u=[],c=0;c<i.length;c+=1){var a=r.slice();a.push(i[c]),s?u.push(a):u=u.concat(t(a,e,o))}return u}([],this.constructor,[].concat([this.items],r)))},R=function(){this.dump(),"undefined"!=typeof process&&process.exit(1)},_=function(t){var r;r=t instanceof this.constructor?t.all():t;var e=this.items.filter((function(t){return-1===r.indexOf(t)}));return new this.constructor(e)},W=function(t){var r=this,e=t;t instanceof this.constructor&&(e=t.all());var n={};return Object.keys(this.items).forEach((function(t){void 0!==e[t]&&e[t]===r.items[t]||(n[t]=r.items[t])})),new this.constructor(n)},K=function(t){var r;r=t instanceof this.constructor?t.all():t;var e=Object.keys(r),n=Object.keys(this.items).filter((function(t){return-1===e.indexOf(t)}));return new this.constructor(this.items).only(n)},X=function(t,r){var e=this.items.filter((function(e){return!(t&&t.some((function(t){return 0===r(e,t)})))}));return new this.constructor(e)},Y=function(t,r){return!this.contains(t,r)},q=function(){return console.log(this),this};function L(t){return L="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},L(t)}var Q=function(){var t=this,r=[],e={},n=function(t){return Array.isArray(t)||"object"===L(t)?JSON.stringify(t):t};return Array.isArray(this.items)?this.items.forEach((function(t,i){var o=n(t);-1===r.indexOf(o)?r.push(o):e[i]=t})):"object"===L(this.items)&&Object.keys(this.items).forEach((function(i){var o=n(t.items[i]);-1===r.indexOf(o)?r.push(o):e[i]=t.items[i]})),new this.constructor(e)},H=function(t){var r=!1;if(Array.isArray(this.items))for(var e=this.items.length,n=0;n<e&&!r;n+=1)r=!1===t(this.items[n],n,this.items);else for(var i=Object.keys(this.items),o=i.length,s=0;s<o&&!r;s+=1){var u=i[s];r=!1===t(this.items[u],u,this.items)}return this};function z(t){return function(t){if(Array.isArray(t))return G(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(!t)return;if("string"==typeof t)return G(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return G(t,r)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function G(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var V=function(t){return this.each((function(r,e){t.apply(void 0,z(r).concat([e]))})),this},Z=M,tt=function(t){return Z(this.items).every(t)},rt=function(t){return Array.isArray(t[0])?t[0]:t},et=rt,nt=function(){for(var t=this,r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];var i=et(e);if(Array.isArray(this.items)){var o=this.items.filter((function(t){return-1===i.indexOf(t)}));return new this.constructor(o)}var s={};return Object.keys(this.items).forEach((function(r){-1===i.indexOf(r)&&(s[r]=t.items[r])})),new this.constructor(s)};function it(t){return it="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},it(t)}function ot(t){if(Array.isArray(t)){if(t.length)return!1}else if(null!=t&&"object"===it(t)){if(Object.keys(t).length)return!1}else if(t)return!1;return!0}var st=function(t){var r=t||!1,e=null;return e=Array.isArray(this.items)?function(t,r){if(t)return r.filter(t);for(var e=[],n=0;n<r.length;n+=1){var i=r[n];ot(i)||e.push(i)}return e}(r,this.items):function(t,r){var e={};return Object.keys(r).forEach((function(n){t?t(r[n],n)&&(e[n]=r[n]):ot(r[n])||(e[n]=r[n])})),e}(r,this.items),new this.constructor(e)},ut=a.isFunction,ct=function(t,r){if(ut(t)){for(var e=Object.keys(this.items),n=0;n<e.length;n+=1){var i=e[n],o=this.items[i];if(t(o,i))return o}return ut(r)?r():r}if(Array.isArray(this.items)&&this.items.length||Object.keys(this.items).length){if(Array.isArray(this.items))return this.items[0];var s=Object.keys(this.items)[0];return this.items[s]}return ut(r)?r():r},at=a.isFunction,ft=function(t,r,e){if(at(t))return this.first(t,(function(){throw new Error("Item not found.")}));var n=this.where(t,r,e);if(n.isEmpty())throw new Error("Item not found.");return n.first()},lt=function(t,r,e){return this.where(t,r,e).first()||null},ht=function(t){return this.map(t).collapse()},yt=a.isArray,pt=a.isObject,mt=function(t){var r=t||1/0,e=!1,n=[],i=function(t){n=[],yt(t)?t.forEach((function(t){yt(t)?n=n.concat(t):pt(t)?Object.keys(t).forEach((function(r){n=n.concat(t[r])})):n.push(t)})):Object.keys(t).forEach((function(r){yt(t[r])?n=n.concat(t[r]):pt(t[r])?Object.keys(t[r]).forEach((function(e){n=n.concat(t[r][e])})):n.push(t[r])})),e=0===(e=n.filter((function(t){return pt(t)}))).length,r-=1};for(i(this.items);!e&&r>0;)i(n);return new this.constructor(n)},vt=function(){var t=this,r={};return Array.isArray(this.items)?Object.keys(this.items).forEach((function(e){r[t.items[e]]=Number(e)})):Object.keys(this.items).forEach((function(e){r[t.items[e]]=e})),new this.constructor(r)},bt=function(t,r){var e=this,n={};return Array.isArray(this.items)?n=this.items.slice(t*r-r,t*r):Object.keys(this.items).slice(t*r-r,t*r).forEach((function(t){n[t]=e.items[t]})),new this.constructor(n)},dt=function(t){return Array.isArray(this.items)?this.items.splice(t,1):delete this.items[t],this},wt=a.isFunction,gt=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return void 0!==this.items[t]?this.items[t]:wt(r)?r():null!==r?r:null},At=function(t,r){try{return r.split(".").reduce((function(t,r){return t[r]}),t)}catch(r){return t}},Ot=At,jt=a.isFunction,St=function(t){var r=this,e={};return this.items.forEach((function(n,i){var o;o=jt(t)?t(n,i):Ot(n,t)||0===Ot(n,t)?Ot(n,t):"",void 0===e[o]&&(e[o]=new r.constructor([])),e[o].push(n)})),new this.constructor(e)},Et=rt,kt=function(){for(var t=this,r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];var i=Et(e);return i.filter((function(r){return Object.hasOwnProperty.call(t.items,r)})).length===i.length},It=function(t,r){return void 0===r?this.items.join(t):new this.constructor(this.items).pluck(t).all().join(r)},xt=function(t){var r=t;t instanceof this.constructor&&(r=t.all());var e=this.items.filter((function(t){return-1!==r.indexOf(t)}));return new this.constructor(e)},Pt=function(t){var r=this,e=Object.keys(t);t instanceof this.constructor&&(e=Object.keys(t.all()));var n={};return Object.keys(this.items).forEach((function(t){-1!==e.indexOf(t)&&(n[t]=r.items[t])})),new this.constructor(n)},Mt=function(){return Array.isArray(this.items)?!this.items.length:!Object.keys(this.items).length},Nt=function(){return!this.isEmpty()},$t=function(t,r){var e=this.values();if(void 0===r)return e.implode(t);var n=e.count();if(0===n)return"";if(1===n)return e.last();var i=e.pop();return e.implode(t)+r+i},Ct=At,Ft=a.isFunction,Bt=function(t){var r={};return Ft(t)?this.items.forEach((function(e){r[t(e)]=e})):this.items.forEach((function(e){var n=Ct(e,t);r[n||""]=e})),new this.constructor(r)},Dt=function(){var t=Object.keys(this.items);return Array.isArray(this.items)&&(t=t.map(Number)),new this.constructor(t)},Tt=a.isFunction,Ut=function(t,r){var e=this.items;if(Tt(t)&&(e=this.filter(t).all()),Array.isArray(e)&&!e.length||!Object.keys(e).length)return Tt(r)?r():r;if(Array.isArray(e))return e[e.length-1];var n=Object.keys(e);return e[n[n.length-1]]},Jt=function(t,r){this.constructor.prototype[t]=r},Rt=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new this.constructor(t)},_t=function(t){var r=this;if(Array.isArray(this.items))return new this.constructor(this.items.map(t));var e={};return Object.keys(this.items).forEach((function(n){e[n]=t(r.items[n],n)})),new this.constructor(e)};function Wt(t){return function(t){if(Array.isArray(t))return Kt(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(!t)return;if("string"==typeof t)return Kt(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Kt(t,r)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Kt(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var Xt=function(t){return this.map((function(r,e){return t.apply(void 0,Wt(r).concat([e]))}))};function Yt(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==e)return;var n,i,o=[],s=!0,u=!1;try{for(e=e.call(t);!(s=(n=e.next()).done)&&(o.push(n.value),!r||o.length!==r);s=!0);}catch(t){u=!0,i=t}finally{try{s||null==e.return||e.return()}finally{if(u)throw i}}return o}(t,r)||function(t,r){if(!t)return;if("string"==typeof t)return qt(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return qt(t,r)}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qt(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var Lt=function(t){var r={};return this.items.forEach((function(e,n){var i=Yt(t(e,n),2),o=i[0],s=i[1];void 0===r[o]?r[o]=[s]:r[o].push(s)})),new this.constructor(r)},Qt=function(t){return this.map((function(r,e){return new t(r,e)}))};function Ht(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==e)return;var n,i,o=[],s=!0,u=!1;try{for(e=e.call(t);!(s=(n=e.next()).done)&&(o.push(n.value),!r||o.length!==r);s=!0);}catch(t){u=!0,i=t}finally{try{s||null==e.return||e.return()}finally{if(u)throw i}}return o}(t,r)||function(t,r){if(!t)return;if("string"==typeof t)return zt(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return zt(t,r)}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function zt(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var Gt=function(t){var r={};return this.items.forEach((function(e,n){var i=Ht(t(e,n),2),o=i[0],s=i[1];void 0===r[o]?r[o]=[s]:r[o].push(s)})),new this.constructor(r)};function Vt(t,r){return function(t){if(Array.isArray(t))return t}(t)||function(t,r){var e=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==e)return;var n,i,o=[],s=!0,u=!1;try{for(e=e.call(t);!(s=(n=e.next()).done)&&(o.push(n.value),!r||o.length!==r);s=!0);}catch(t){u=!0,i=t}finally{try{s||null==e.return||e.return()}finally{if(u)throw i}}return o}(t,r)||function(t,r){if(!t)return;if("string"==typeof t)return Zt(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return Zt(t,r)}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Zt(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var tr=function(t){var r=this,e={};return Array.isArray(this.items)?this.items.forEach((function(r,n){var i=Vt(t(r,n),2),o=i[0],s=i[1];e[o]=s})):Object.keys(this.items).forEach((function(n){var i=Vt(t(r.items[n],n),2),o=i[0],s=i[1];e[o]=s})),new this.constructor(e)};function rr(t){return function(t){if(Array.isArray(t))return er(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(!t)return;if("string"==typeof t)return er(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return er(t,r)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function er(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var nr=function(t){if("string"==typeof t){var r=this.items.filter((function(r){return void 0!==r[t]}));return Math.max.apply(Math,rr(r.map((function(r){return r[t]}))))}return Math.max.apply(Math,rr(this.items))},ir=function(t){var r=this.items.length;return void 0===t?r%2==0?(this.items[r/2-1]+this.items[r/2])/2:this.items[Math.floor(r/2)]:r%2==0?(this.items[r/2-1][t]+this.items[r/2][t])/2:this.items[Math.floor(r/2)][t]},or=function(t){var r=t;if("string"==typeof r&&(r=[r]),Array.isArray(this.items)&&Array.isArray(r))return new this.constructor(this.items.concat(r));var e=JSON.parse(JSON.stringify(this.items));return Object.keys(r).forEach((function(t){e[t]=r[t]})),new this.constructor(e)};function sr(t){return sr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sr(t)}function ur(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,n)}return e}function cr(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?ur(Object(e),!0).forEach((function(r){ar(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):ur(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}function ar(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var fr=function(t){var r=function t(r,e){var n={};return Object.keys(cr(cr({},r),e)).forEach((function(i){void 0===r[i]&&void 0!==e[i]?n[i]=e[i]:void 0!==r[i]&&void 0===e[i]?n[i]=r[i]:void 0!==r[i]&&void 0!==e[i]&&(r[i]===e[i]?n[i]=r[i]:Array.isArray(r[i])||"object"!==sr(r[i])||Array.isArray(e[i])||"object"!==sr(e[i])?n[i]=[].concat(r[i],e[i]):n[i]=t(r[i],e[i]))})),n};return t?"Collection"===t.constructor.name?new this.constructor(r(this.items,t.all())):new this.constructor(r(this.items,t)):this};function lr(t){return function(t){if(Array.isArray(t))return hr(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,r){if(!t)return;if("string"==typeof t)return hr(t,r);var e=Object.prototype.toString.call(t).slice(8,-1);"Object"===e&&t.constructor&&(e=t.constructor.name);if("Map"===e||"Set"===e)return Array.from(t);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return hr(t,r)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function hr(t,r){(null==r||r>t.length)&&(r=t.length);for(var e=0,n=new Array(r);e<r;e++)n[e]=t[e];return n}var yr=function(t){if(void 0!==t){var r=this.items.filter((function(r){return void 0!==r[t]}));return Math.min.apply(Math,lr(r.map((function(r){return r[t]}))))}return Math.min.apply(Math,lr(this.items))},pr=function(t){var r=[],e=1;return this.items.length?(this.items.forEach((function(n){var i=r.filter((function(r){return void 0!==t?r.key===n[t]:r.key===n}));if(i.length){i[0].count+=1;var o=i[0].count;o>e&&(e=o)}else void 0!==t?r.push({key:n[t],count:1}):r.push({key:n,count:1})})),r.filter((function(t){return t.count===e})).map((function(t){return t.key}))):null},mr=M,vr=function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,e=mr(this.items).slice(r).filter((function(r,e){return e%t==0}));return new this.constructor(e)},br=rt,dr=function(){for(var t=this,r=arguments.length,e=new Array(r),n=0;n<r;n++)e[n]=arguments[n];var i=br(e);if(Array.isArray(this.items)){var o=this.items.filter((function(t){return-1!==i.indexOf(t)}));return new this.constructor(o)}var s={};return Object.keys(this.items).forEach((function(r){-1!==i.indexOf(r)&&(s[r]=t.items[r])})),new this.constructor(s)},wr=S,gr=function(t,r){var e=Math.abs(t),n=this.count();if(e<=n)return this;for(var i=e-n,o=wr(this.items),s=Array.isArray(this.items),u=t<0,c=0;c<i;)s?u?o.unshift(r):o.push(r):void 0!==o[c]?i+=1:o[c]=r,c+=1;return new this.constructor(o)},Ar=function(t){var r,e=this;return Array.isArray(this.items)?(r=[new this.constructor([]),new this.constructor([])],this.items.forEach((function(e){!0===t(e)?r[0].push(e):r[1].push(e)}))):(r=[new this.constructor({}),new this.constructor({})],Object.keys(this.items).forEach((function(n){var i=e.items[n];!0===t(i)?r[0].put(n,i):r[1].put(n,i)}))),new this.constructor(r)},Or=function(t){return t(this)},jr=a.isArray,Sr=a.isObject,Er=At,kr=function(t,r){if(-1!==t.indexOf("*")){var e=(f=this.items,l={},f.forEach((function(t,r){!function t(r,e){Sr(r)?Object.keys(r).forEach((function(n){t(r[n],"".concat(e,".").concat(n))})):jr(r)&&r.forEach((function(r,n){t(r,"".concat(e,".").concat(n))})),l[e]=r}(t,r)})),l),n=[];if(void 0!==r){var i=new RegExp("0.".concat(r),"g"),o="0.".concat(r).split(".").length;Object.keys(e).forEach((function(t){var r=t.match(i);if(r){var s=r[0];s.split(".").length===o&&n.push(e[s])}}))}var s=[],u=new RegExp("0.".concat(t),"g"),c="0.".concat(t).split(".").length;if(Object.keys(e).forEach((function(t){var r=t.match(u);if(r){var n=r[0];n.split(".").length===c&&s.push(e[n])}})),void 0!==r){var a={};return this.items.forEach((function(t,r){a[n[r]||""]=s})),new this.constructor(a)}return new this.constructor([s])}var f,l;if(void 0!==r){var h={};return this.items.forEach((function(e){void 0!==Er(e,t)?h[e[r]||""]=Er(e,t):h[e[r]||""]=null})),new this.constructor(h)}return this.map((function(r){return void 0!==Er(r,t)?Er(r,t):null}))},Ir=rt,xr=function(t){for(var r=arguments.length,e=new Array(r>1?r-1:0),n=1;n<r;n++)e[n-1]=arguments[n];Ir(e).forEach((function(r){delete t[r]}))},Pr=a.isArray,Mr=a.isObject,Nr=xr,$r=function(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(this.isEmpty())return null;if(Pr(this.items))return 1===r?this.items.pop():new this.constructor(this.items.splice(-r));if(Mr(this.items)){var e=Object.keys(this.items);if(1===r){var n=e[e.length-1],i=this.items[n];return Nr(this.items,n),i}var o=e.slice(-r),s=o.reduce((function(r,e){return r[e]=t.items[e],r}),{});return Nr(this.items,o),new this.constructor(s)}return null},Cr=function(t,r){return void 0!==r?this.put(r,t):(this.items.unshift(t),this)},Fr=a.isFunction,Br=function(t,r){var e=this.items[t]||null;return e||void 0===r||(e=Fr(r)?r():r),delete this.items[t],e},Dr=function(){var t;return(t=this.items).push.apply(t,arguments),this},Tr=function(t,r){return this.items[t]=r,this},Ur=M,Jr=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,r=Ur(this.items),e=new this.constructor(r).shuffle();return t!==parseInt(t,10)?e.first():e.take(t)},Rr=function(t,r){var e=this,n=null;return void 0!==r&&(n=r),Array.isArray(this.items)?this.items.forEach((function(r){n=t(n,r)})):Object.keys(this.items).forEach((function(r){n=t(n,e.items[r],r)})),n},_r=function(t){return new this.constructor(this.items).filter((function(r){return!t(r)}))};function Wr(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,n)}return e}function Kr(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?Wr(Object(e),!0).forEach((function(r){Xr(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):Wr(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}function Xr(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var Yr=function(t){if(!t)return this;if(Array.isArray(t)){var r=this.items.map((function(r,e){return t[e]||r}));return new this.constructor(r)}if("Collection"===t.constructor.name){var e=Kr(Kr({},this.items),t.all());return new this.constructor(e)}var n=Kr(Kr({},this.items),t);return new this.constructor(n)};function qr(t){return qr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qr(t)}function Lr(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,n)}return e}function Qr(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?Lr(Object(e),!0).forEach((function(r){Hr(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):Lr(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}function Hr(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var zr=function(t){var r=function t(r,e){var n=Qr({},r);return Object.keys(Qr(Qr({},r),e)).forEach((function(i){Array.isArray(e[i])||"object"!==qr(e[i])?void 0===r[i]&&void 0!==e[i]?"object"===qr(r[i])?n[i]=Qr({},e[i]):n[i]=e[i]:void 0!==r[i]&&void 0===e[i]?"object"===qr(r[i])?n[i]=Qr({},r[i]):n[i]=r[i]:void 0!==r[i]&&void 0!==e[i]&&("object"===qr(e[i])?n[i]=Qr({},e[i]):n[i]=e[i]):n[i]=t(r[i],e[i])})),n};return t?Array.isArray(t)||"object"===qr(t)?"Collection"===t.constructor.name?new this.constructor(r(this.items,t.all())):new this.constructor(r(this.items,t)):new this.constructor(r(this.items,[t])):this},Gr=function(){var t=[].concat(this.items).reverse();return new this.constructor(t)},Vr=a.isArray,Zr=a.isObject,te=a.isFunction,re=function(t,r){var e,n=this,i=function(e,i){return te(t)?t(n.items[i],i):r?n.items[i]===t:n.items[i]==t};return Vr(this.items)?e=this.items.findIndex(i):Zr(this.items)&&(e=Object.keys(this.items).find((function(t){return i(n.items[t],t)}))),!(void 0===e||e<0)&&e},ee=a.isArray,ne=a.isObject,ie=xr,oe=function(){var t=this,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1;if(this.isEmpty())return null;if(ee(this.items))return 1===r?this.items.shift():new this.constructor(this.items.splice(0,r));if(ne(this.items)){if(1===r){var e=Object.keys(this.items)[0],n=this.items[e];return delete this.items[e],n}var i=Object.keys(this.items).slice(0,r),o=i.reduce((function(r,e){return r[e]=t.items[e],r}),{});return ie(this.items,i),new this.constructor(o)}return null},se=M,ue=function(){var t,r,e,n=se(this.items);for(e=n.length;e;e-=1)t=Math.floor(Math.random()*e),r=n[e-1],n[e-1]=n[t],n[t]=r;return this.items=n,this},ce=a.isObject,ae=function(t){var r=this;return ce(this.items)?new this.constructor(Object.keys(this.items).reduce((function(e,n,i){return i+1>t&&(e[n]=r.items[n]),e}),{})):new this.constructor(this.items.slice(t))},fe=a.isArray,le=a.isObject,he=a.isFunction,ye=function(t){var r,e=this,n=null,i=function(r){return r===t};return he(t)&&(i=t),fe(this.items)&&(r=this.items.filter((function(t){return!0!==n&&(n=i(t)),n}))),le(this.items)&&(r=Object.keys(this.items).reduce((function(t,r){return!0!==n&&(n=i(e.items[r])),!1!==n&&(t[r]=e.items[r]),t}),{})),new this.constructor(r)},pe=a.isArray,me=a.isObject,ve=a.isFunction,be=function(t){var r,e=this,n=null,i=function(r){return r===t};return ve(t)&&(i=t),pe(this.items)&&(r=this.items.filter((function(t){return!0!==n&&(n=!i(t)),n}))),me(this.items)&&(r=Object.keys(this.items).reduce((function(t,r){return!0!==n&&(n=!i(e.items[r])),!1!==n&&(t[r]=e.items[r]),t}),{})),new this.constructor(r)},de=function(t,r){var e=this.items.slice(t);return void 0!==r&&(e=e.slice(0,r)),new this.constructor(e)},we=a.isFunction,ge=function(t,r,e){var n;if((n=we(t)?this.filter(t):this.where(t,r,e)).isEmpty())throw new Error("Item not found.");if(n.count()>1)throw new Error("Multiple items found.");return n.first()},Ae=B,Oe=function(t){var r=[].concat(this.items);return void 0===t?this.every((function(t){return"number"==typeof t}))?r.sort((function(t,r){return t-r})):r.sort():r.sort(t),new this.constructor(r)},je=function(){return this.sort().reverse()},Se=At,Ee=a.isFunction,ke=function(t){var r=[].concat(this.items),e=function(r){return Ee(t)?t(r):Se(r,t)};return r.sort((function(t,r){var n=e(t),i=e(r);return null==n?1:null==i||n<i?-1:n>i?1:0})),new this.constructor(r)},Ie=function(t){return this.sortBy(t).reverse()},xe=function(){var t=this,r={};return Object.keys(this.items).sort().forEach((function(e){r[e]=t.items[e]})),new this.constructor(r)},Pe=function(){var t=this,r={};return Object.keys(this.items).sort().reverse().forEach((function(e){r[e]=t.items[e]})),new this.constructor(r)},Me=function(t,r,e){var n=this.slice(t,r);if(this.items=this.diff(n.all()).all(),Array.isArray(e))for(var i=0,o=e.length;i<o;i+=1)this.items.splice(t+i,0,e[i]);return n},Ne=function(t){for(var r=Math.round(this.items.length/t),e=JSON.parse(JSON.stringify(this.items)),n=[],i=0;i<t;i+=1)n.push(new this.constructor(e.splice(0,r)));return new this.constructor(n)},$e=M,Ce=a.isFunction,Fe=function(t){var r=$e(this.items),e=0;if(void 0===t)for(var n=0,i=r.length;n<i;n+=1)e+=parseFloat(r[n]);else if(Ce(t))for(var o=0,s=r.length;o<s;o+=1)e+=parseFloat(t(r[o]));else for(var u=0,c=r.length;u<c;u+=1)e+=parseFloat(r[u][t]);return parseFloat(e.toPrecision(12))};function Be(t){return Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Be(t)}var De=function(t){var r=this;if(!Array.isArray(this.items)&&"object"===Be(this.items)){var e,n=Object.keys(this.items);e=t<0?n.slice(t):n.slice(0,t);var i={};return n.forEach((function(t){-1!==e.indexOf(t)&&(i[t]=r.items[t])})),new this.constructor(i)}return t<0?new this.constructor(this.items.slice(t)):new this.constructor(this.items.slice(0,t))},Te=a.isArray,Ue=a.isObject,Je=a.isFunction,Re=function(t){var r,e=this,n=null,i=function(r){return r===t};return Je(t)&&(i=t),Te(this.items)&&(r=this.items.filter((function(t){return!1!==n&&(n=!i(t)),n}))),Ue(this.items)&&(r=Object.keys(this.items).reduce((function(t,r){return!1!==n&&(n=!i(e.items[r])),!1!==n&&(t[r]=e.items[r]),t}),{})),new this.constructor(r)},_e=a.isArray,We=a.isObject,Ke=a.isFunction,Xe=function(t){var r,e=this,n=null,i=function(r){return r===t};return Ke(t)&&(i=t),_e(this.items)&&(r=this.items.filter((function(t){return!1!==n&&(n=i(t)),n}))),We(this.items)&&(r=Object.keys(this.items).reduce((function(t,r){return!1!==n&&(n=i(e.items[r])),!1!==n&&(t[r]=e.items[r]),t}),{})),new this.constructor(r)},Ye=function(t){return t(this),this},qe=function(t,r){for(var e=1;e<=t;e+=1)this.items.push(r(e));return this},Le=function(){var t=this.constructor;function r(e,n){var i=[];e instanceof t?(e.items.forEach((function(t){return r(t,i)})),n.push(i)):Array.isArray(e)?(e.forEach((function(t){return r(t,i)})),n.push(i)):n.push(e)}if(Array.isArray(this.items)){var e=[];return this.items.forEach((function(t){r(t,e)})),e}return this.values().all()};function Qe(t){return Qe="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qe(t)}var He=function(){return"object"!==Qe(this.items)||Array.isArray(this.items)?JSON.stringify(this.toArray()):JSON.stringify(this.all())},ze=function(t){var r=this;if(Array.isArray(this.items))this.items=this.items.map(t);else{var e={};Object.keys(this.items).forEach((function(n){e[n]=t(r.items[n],n)})),this.items=e}return this};function Ge(t,r){var e=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);r&&(n=n.filter((function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable}))),e.push.apply(e,n)}return e}function Ve(t){for(var r=1;r<arguments.length;r++){var e=null!=arguments[r]?arguments[r]:{};r%2?Ge(Object(e),!0).forEach((function(r){Ze(t,r,e[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):Ge(Object(e)).forEach((function(r){Object.defineProperty(t,r,Object.getOwnPropertyDescriptor(e,r))}))}return t}function Ze(t,r,e){return r in t?Object.defineProperty(t,r,{value:e,enumerable:!0,configurable:!0,writable:!0}):t[r]=e,t}var tn=function(){var t=this;if(Array.isArray(this.items))return this;var r={};return Object.keys(this.items).forEach((function(e){if(-1!==e.indexOf(".")){var n=r;e.split(".").reduce((function(r,n,i,o){return r[n]||(r[n]={}),i===o.length-1&&(r[n]=t.items[e]),r[n]}),n),r=Ve(Ve({},r),n)}else r[e]=t.items[e]})),new this.constructor(r)},rn=function(t,r,e){t?e(this):r(this)},en=function(t,r){if(Array.isArray(this.items)&&this.items.length)return t(this);if(Object.keys(this.items).length)return t(this);if(void 0!==r){if(Array.isArray(this.items)&&!this.items.length)return r(this);if(!Object.keys(this.items).length)return r(this)}return this},nn=function(t,r){if(Array.isArray(this.items)&&!this.items.length)return t(this);if(!Object.keys(this.items).length)return t(this);if(void 0!==r){if(Array.isArray(this.items)&&this.items.length)return r(this);if(Object.keys(this.items).length)return r(this)}return this},on=function(t){var r=this,e=JSON.parse(JSON.stringify(this.items));return Object.keys(t).forEach((function(n){void 0===r.items[n]&&(e[n]=t[n])})),new this.constructor(e)},sn=a.isFunction,un=function(t){var r;if(void 0===t)r=this.items.filter((function(t,r,e){return e.indexOf(t)===r}));else{r=[];for(var e=[],n=0,i=this.items.length;n<i;n+=1){var o=void 0;o=sn(t)?t(this.items[n]):this.items[n][t],-1===e.indexOf(o)&&(r.push(this.items[n]),e.push(o))}}return new this.constructor(r)},cn=function(t){return t instanceof this.constructor?t.all():t},an=M,fn=function(){return new this.constructor(an(this.items))},ln=function(t,r,e){return t?r(this,t):e?e(this,t):this},hn=M,yn=At,pn=function(t,r,e){var n=r,i=e,o=hn(this.items);if(void 0===r||!0===r)return new this.constructor(o.filter((function(r){return yn(r,t)})));if(!1===r)return new this.constructor(o.filter((function(r){return!yn(r,t)})));void 0===e&&(i=r,n="===");var s=o.filter((function(r){switch(n){case"==":return yn(r,t)===Number(i)||yn(r,t)===i.toString();default:case"===":return yn(r,t)===i;case"!=":case"<>":return yn(r,t)!==Number(i)&&yn(r,t)!==i.toString();case"!==":return yn(r,t)!==i;case"<":return yn(r,t)<i;case"<=":return yn(r,t)<=i;case">":return yn(r,t)>i;case">=":return yn(r,t)>=i}}));return new this.constructor(s)},mn=function(t,r){return this.where(t,">=",r[0]).where(t,"<=",r[r.length-1])},vn=M,bn=At,dn=function(t,r){var e=vn(r),n=this.items.filter((function(r){return-1!==e.indexOf(bn(r,t))}));return new this.constructor(n)},wn=function(t){return this.filter((function(r){return r instanceof t}))},gn=At,An=function(t,r){return this.filter((function(e){return gn(e,t)<r[0]||gn(e,t)>r[r.length-1]}))},On=M,jn=At,Sn=function(t,r){var e=On(r),n=this.items.filter((function(r){return-1===e.indexOf(jn(r,t))}));return new this.constructor(n)},En=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.where(t,"===",null)},kn=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return this.where(t,"!==",null)};function In(t){return In="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},In(t)}var xn=function(t){return t instanceof this.constructor?t:"object"===In(t)?new this.constructor(t):new this.constructor([t])},Pn=function(t){var r=this,e=t;e instanceof this.constructor&&(e=e.all());var n=this.items.map((function(t,n){return new r.constructor([t,e[n]])}));return new this.constructor(n)};!function(t){function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function e(t){void 0===t||Array.isArray(t)||"object"===r(t)?t instanceof this.constructor?this.items=t.all():this.items=t||[]:this.items=[t]}var n=s;"undefined"!=typeof Symbol&&(e.prototype[Symbol.iterator]=n),e.prototype.toJSON=function(){return this.items},e.prototype.all=u,e.prototype.average=l,e.prototype.avg=h,e.prototype.chunk=p,e.prototype.collapse=b,e.prototype.combine=A,e.prototype.concat=I,e.prototype.contains=B,e.prototype.containsOneItem=D,e.prototype.count=T,e.prototype.countBy=U,e.prototype.crossJoin=J,e.prototype.dd=R,e.prototype.diff=_,e.prototype.diffAssoc=W,e.prototype.diffKeys=K,e.prototype.diffUsing=X,e.prototype.doesntContain=Y,e.prototype.dump=q,e.prototype.duplicates=Q,e.prototype.each=H,e.prototype.eachSpread=V,e.prototype.every=tt,e.prototype.except=nt,e.prototype.filter=st,e.prototype.first=ct,e.prototype.firstOrFail=ft,e.prototype.firstWhere=lt,e.prototype.flatMap=ht,e.prototype.flatten=mt,e.prototype.flip=vt,e.prototype.forPage=bt,e.prototype.forget=dt,e.prototype.get=gt,e.prototype.groupBy=St,e.prototype.has=kt,e.prototype.implode=It,e.prototype.intersect=xt,e.prototype.intersectByKeys=Pt,e.prototype.isEmpty=Mt,e.prototype.isNotEmpty=Nt,e.prototype.join=$t,e.prototype.keyBy=Bt,e.prototype.keys=Dt,e.prototype.last=Ut,e.prototype.macro=Jt,e.prototype.make=Rt,e.prototype.map=_t,e.prototype.mapSpread=Xt,e.prototype.mapToDictionary=Lt,e.prototype.mapInto=Qt,e.prototype.mapToGroups=Gt,e.prototype.mapWithKeys=tr,e.prototype.max=nr,e.prototype.median=ir,e.prototype.merge=or,e.prototype.mergeRecursive=fr,e.prototype.min=yr,e.prototype.mode=pr,e.prototype.nth=vr,e.prototype.only=dr,e.prototype.pad=gr,e.prototype.partition=Ar,e.prototype.pipe=Or,e.prototype.pluck=kr,e.prototype.pop=$r,e.prototype.prepend=Cr,e.prototype.pull=Br,e.prototype.push=Dr,e.prototype.put=Tr,e.prototype.random=Jr,e.prototype.reduce=Rr,e.prototype.reject=_r,e.prototype.replace=Yr,e.prototype.replaceRecursive=zr,e.prototype.reverse=Gr,e.prototype.search=re,e.prototype.shift=oe,e.prototype.shuffle=ue,e.prototype.skip=ae,e.prototype.skipUntil=ye,e.prototype.skipWhile=be,e.prototype.slice=de,e.prototype.sole=ge,e.prototype.some=Ae,e.prototype.sort=Oe,e.prototype.sortDesc=je,e.prototype.sortBy=ke,e.prototype.sortByDesc=Ie,e.prototype.sortKeys=xe,e.prototype.sortKeysDesc=Pe,e.prototype.splice=Me,e.prototype.split=Ne,e.prototype.sum=Fe,e.prototype.take=De,e.prototype.takeUntil=Re,e.prototype.takeWhile=Xe,e.prototype.tap=Ye,e.prototype.times=qe,e.prototype.toArray=Le,e.prototype.toJson=He,e.prototype.transform=ze,e.prototype.undot=tn,e.prototype.unless=rn,e.prototype.unlessEmpty=en,e.prototype.unlessNotEmpty=nn,e.prototype.union=on,e.prototype.unique=un,e.prototype.unwrap=cn,e.prototype.values=fn,e.prototype.when=ln,e.prototype.whenEmpty=nn,e.prototype.whenNotEmpty=en,e.prototype.where=pn,e.prototype.whereBetween=mn,e.prototype.whereIn=dn,e.prototype.whereInstanceOf=wn,e.prototype.whereNotBetween=An,e.prototype.whereNotIn=Sn,e.prototype.whereNull=En,e.prototype.whereNotNull=kn,e.prototype.wrap=xn,e.prototype.zip=Pn;var i=function(t){return new e(t)};t.exports=i,t.exports.collect=i,t.exports.default=i,t.exports.Collection=e}(o);var Mn=i(o.exports),Nn=[];const $n=(t,r)=>{const e=t.getBoundingClientRect(),n=r.getBoundingClientRect();let i=e.left+e.width/2,o=e.top+e.height/2,s=n.left+n.width/2;return{x1:i,y1:o,x2:s,y2:n.top+n.height/2,controlX:(i+s)/2,controlY:o-50}},Cn=(t,r)=>null!=Mn(Nn).firstWhere("div2",t);class Fn{constructor(t){this.data=t}draw(){let t=document.createElement("div");t.className="node",t.innerHTML=this.data.name;var i=`node_${r()}`;return t.id=i,t.onmousedown=function(o){var s=null;t.id=`${i}_dragging`;function u(r){var i,o,u,c;i=r.pageX,o=r.pageY,t.style.left=i-t.offsetWidth/2+"px",t.style.top=o-t.offsetHeight/2+"px",Nn.forEach((t=>{let r=$n(t.div1,t.div2);document.getElementById(t.id).setAttribute("d",`M${r.x1},${r.y1} Q${r.controlX},${r.controlY} ${r.x2},${r.y2}`)})),u=t,c=null,document.querySelectorAll(".node").forEach((t=>{t!==u&&!n(t)&&e(u,t,400)&&(c=t)})),s=c,Cn(t)||((t,r)=>{if(null===r)return void document.getElementById("new_path").removeAttribute("d");let e=$n(t,r);document.getElementById("new_path").setAttribute("d",`M${e.x1},${e.y1} Q${e.controlX},${e.controlY} ${e.x2},${e.y2}`)})(t,s)}document.addEventListener("mousemove",u),t.onmouseup=function(){(()=>{let t=document.getElementById("new_path");null!=t.getAttribute("d")&&t.removeAttribute("d")})(),document.removeEventListener("mousemove",u),t.id=i,null===s||Cn(t)||((t,e)=>{let n=document.createElementNS("http://www.w3.org/2000/svg","path");n.id=r(),n.setAttribute("fill","none"),n.setAttribute("stroke","blue"),n.setAttribute("stroke-width","6");let i=$n(t,e);Nn.push({id:n.id,div1:t,div2:e}),n.setAttribute("d",`M${i.x1},${i.y1} Q${i.controlX},${i.controlY} ${i.x2},${i.y2}`),document.getElementById("lines").appendChild(n)})(t,s),t.onmouseup=null}},t}}var Bn=new t;Bn.draw();var Dn=new Fn({name:"testando"});Bn.addNode(Dn.draw()),Bn.addNode(Dn.draw()),Bn.addNode(Dn.draw());var Tn={Canva:t,Node:Fn};export{Tn as default};
